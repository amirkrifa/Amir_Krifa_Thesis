\chapter{Introduction}
\label{chapter:Introduction}

Mobile networking is quickly reaching a tipping point. While content has been a second-class customer for cellular networks until recently, the wide spread of smart phones, and the access these provide to existing (e.g. social networking) and novel applications, are generating unprecedented amounts of mobile content. Indeed, user demand for content is increasing and creating a shift in focus towards content and content centric systems~\cite{CCN}, in both wired and wireless Internet. According to statistics published by ComScore~\cite{ComScore}, content dissemination through social networking ranks as the fastest-growing mobile content category. It was also reported that mobile content traffic exerted by mobile devices fetching content from the Internet is already a drainage of mobile operators' network resources~\cite{ATT,ATT2,Killer-DTN} . Similar to the wired Internet, mobile users are now coping with the congestion at network gateway. The capacity of current cellular infrastructures (e.g. GPRS and 3G) has already been pushed to the limit by even a small number of eager data plan users~\cite{ATT}. To support the increasing number of devices generating content at high rates, ISPs will inevitably be pushed towards either lowering bandwidth quotas~\cite{ATT}, adopting non flat rate plans, or deploying (expensive) next generation equipment (e.g. LTE). This has lead many researchers (and industry) to explore alternative or hybrid architectural solutions~\cite{CellOffLoading,Augmenting3G}. 

To this end, direct mobile-to-mobile communication can be leveraged to harvest the large amounts of unused bandwidth between wireless devices in proximity. Mobile devices with multiple wireless interfaces (e.g. Bluetooth and WiFi) allow two users in range to exchange content at much higher speeds, lower power consumption per bit, and essentially no (direct) monetary cost~\cite{Energy-Delay}. This raises an opportunity for a content dissemination overlay over the large numbers of mobile devices \emph{in the wild}, meeting with each other in passing. Nevertheless, users mobility and the much shorter range of high speed interfaces makes \emph{contacts} between devices inherently \emph{intermittent} and \emph{time-limited}. Indeed, as the topology is very unstable, content providers and content consumers might be completely unaware of each other and never connected at the same time to the same part of the network. Therefore, content should be replicated and moved towards users in a \emph{store-carry-and-forward} manner. The latter approach fall within the concept of Disruption Tolerant Networks (DTNs) that tolerates network partitions, long disconnection and topology instability in general and that considers users mobility as being the most effective way to deliver content to interested users. Since the DTN concept was introduced,  a significant share of research has focused on the design of point-to-point content routing protocols and applications like the ones dedicated for large-scale disaster recovery, for ecological and ocean monitoring~\cite{Juang:zebranet, Heidemann:Acoustic}, for vehicular networks~\cite{Levine:MaxProp}, and projects such as TIER~\cite{TIER}, Digital Study Hall~\cite{DSH} and One Laptop Per Child~\cite{OneLaptopPerChild} to benefit developing nations. And recently, researchers switched the focus to a second category of DTN architectures, the ones based on point-to-multipoint communication model and that aim to provide complementary content dissemination solutions to the Internet based ones. 

Irrespective of the DTN application category, the uncertainty about network conditions in a disruption tolerant environment makes content routing and dissemination a challenging problems and rises many questions with regards to the management of the mobile devices resources (storage, energy, etc). Moreover, mobile devices are usually small and light equipments with limited resources (storage, battery power, limited radio range). Consequently if an application context requires the cooperation from rational users, we should expect them to adopt selfish behaviors when deciding to replicate the content towards maximizing their revenues and conserving their resources (for example, their battery life or storage capacity). This context introduces a new class of problems for content routing and dissemination in DTN(s) which we detail in the following section.

\section{Challenges faced by content routing and dissemination in DTN(s)}

\paragraph{Mobility}

Due to frequent topology changes, network partitioning and disruption occur very often in mobile networks than in wired networks.
Network partitioning severely reduces content availability when the user that holds the desired content is not in the same partition where the client users are. Replicating content
in future separate partitions before the occurrence of network partitioning can improve content availability. Content redundancy can also increase the chance for users to find the
closest content while moving. Therefore the replication mechanism should consider all these dynamic natures of mobile network in order to replicate content items beforehand. However the combination of long-term storage and the, often expensive content replication imposes a high storage overhead on wireless devices. Therefore, the replication mechanism should also take into consideration the devices storage limitation and provide the suitable management mechanisms towards delivering the contents under optimal conditions. For the same reasons, when mobility results in short contacts between users, available bandwidth could be insufficient to communicate all intended contents. Consequently, efficient scheduling policies should be provided to decide which content should be chosen and forwarded first when bandwidth is limited, regardless of the specific routing algorithm used.

\paragraph{Content availability}

A disruption tolerant network may involve a large population with thousands of devices, for example, in a crowded scenario like at a stadium or in a museum. In such dense and
large network, to lookup content, a query sent by a client device may need to traverse a long path to reach a replica, therefore increasing the query cost and latency. Moreover, the
existence of a large number of querying devices may cause more channel interference among clients, which thus decreases considerably the available bandwidth and increases channel
access delay. High users mobility may also affect the availability of content. Thus, the replication scheme should also be designed in such way that its performance will not be greatly affected by the large number of devices and high mobility.

\paragraph{Users selfishness}

Mobile devices are controlled by rational users who are aware of the energy constraint and the cost to share and replicate content. Given this fact, one can predict that users will behave selfishly to minimize their own cost and do not care about the system side effects unless cooperation is somehow incentivized and free-riders penalized. 
%The total cost computed at the Nash equilibrium in this case can exceed the optimal cost by a large gap. The system thus should discourage potential selfish behaviors by designing a mechanism that motivate users to store the content if this allows to improve the performance and reduce total cost.

\section{Contributions}

In this thesis, we start by discussing the problem of content dissemination in wireless environments. We describe brifely a solution (BitHoc) that we developed towards managing in an efficient way content sharing in a mobile AdHoc network environment (MANET) and we give an overview of the limitations that the latter solution could face in a wireless disruption prone environment. We then study the state of the art in terms of proposed solution for both point-to-point content routing and point-to-multipoint dissemination solutions in DTN(s). Our main observations were first that \emph{(i)} despite a large amount of effort invested in the design of efficient routing and content dissemination protocols for DTN, there has not been a similar focus on storage management and scheduling policies and second \emph{(ii)} \emph{(ii)}, that in addition to dealing with the resources management challenges, distributed \emph{point-to-multipoint} content sharing systems over non-altruistic mobile devices have one more important issue to deal with: the one to ensure enough nodes collaborate to make the system interesting to participants. This latter goal is often conflicting with optimal resources management algorithms. 

Starting from the latter preliminary study, we wanted to solve the highlighted problems in their foundations. In a first direction emph{(i)}, we focused on the problem of point-to-point content routing through a DTN. Such a problem is frequently encountered in environment and habitat monitoring based on sensor networks where sensor nodes try to deliver in an efficient way the collected observations and measures to a gateway node. We developed a theoretical framework based on Epidemic message dissemination~\cite{haas:mobihoc03,Inria:MessageDelay,akis:mobihoc06}, and proposed a \emph{greedy} optimal joint content scheduling and storage management policy, GBSD (Global knowledge Based Scheduling and Drop) that can either maximize the average delivery rate or minimize the average delivery delay in the context of a congested disruption prone network. GBSD derives a per-message utility by taking into account all information that are relevant for message delivery, and manages messages accordingly. Yet, to derive these utilities, it requires \textit{global} network information, making its implementation difficult in practice, especially given the intermittently connected nature of the targeted networks. In order to amend this, we proposed a second policy, HBSD (History Based Scheduling and Drop), a distributed (\textit{local}) algorithm based on statistical learning. HBSD uses network history to estimate the current state of required (\textit{global}) network parameters and uses these estimates, rather than actual values (as in GBSD), to calculate message utilities for each performance target metric. Furthermore, we looked deeper into our distributed statistics collection solution and identified the available trade-offs between the collection overhead and the resulting performance. Aggressively collecting statistics and exchanging them with every encountered device allows estimates to converge faster (and thus achieves good performance), but it can potentially result in high energy and bandwidth consumption, and also interfere with data transmissions. Our results suggest that close to optimal performance can still be achieved even when the signaling overhead is forced (through sampling) to take only a small percentage of the contact bandwidth. Finally, in this direction, we examined how our algorithm behaves under different congestion regimes. Interestingly, we found that \emph{(i)} at low to moderately congested regimes, the optimal policy is simply equivalent to dropping the message with the oldest age (similarly to the findings of~\cite{QueuingPolicies}), while \emph{(ii)} at highly congested regimes, the optimal policy is not linear on message age; some young messages have to be dropped, as a means of indirect admission control, to allow older messages to create enough replicas and have a chance to be delivered. Hence, our framework can also explain what popular heuristic policies are doing, in this context, relative to the optimal one.

In a second direction \emph{(ii)}, we addressed the problem of efficiently handling \emph{large scale} content sharing over non-altruistic mobile devices. Our ultimate goal was to enable people throught a channel based architecture to express their interests, head out in the real world and wait to get notified whenever a content that matches their interests is retrieved. To achieve this, a candidate architecture should not only take care of the network and device resources, but also carefully consider: \emph{(i)} the propagation of interests of participating users, \emph{(ii)} the matching of these interests to individual node mobility patterns, and \emph{(iii)} the willingness of involved users to collaborate. This latter point can be a major deal-breaker in any envisioned architecture (as is the case for example in traditional MANETs~\cite{NashEquilibria}). As an answer to the latter challenges, we propose MobiTrade, an interest driven content dissemination architecture for opportunistic networks. MobiTrade optimizes the content sharing strategy from the perspective of each individual participant. First, we argue that Tit-For-Tat (TFT) should be directly employed in order to \emph{(a)} isolate free-riders and \emph{(b)} create incentives for nodes to share their resources. This latter point is of key importance as TFT gives content of non-direct interest monetary value. If a node $B$ has content that $A$ is interested in, but $A$ does not have something to give back, $A$ now has the incentive to fetch something for $B$. $B$ now retrieves content that would otherwise be inaccessible to it, and $A$ retrieves content that is easy accessible but that it couldn't \emph{afford} before. While TFT is well known both in P2P~\cite{BitHoc} and opportunistic networks~\cite{BarterDTN} communities, it does not answer itself \emph{how mobile devices should optimally (re-)act in the presence of TFT} towards maximizing their revenues. MobiTrade answers this question by introducing a content utility framework that aims to \emph{maximize the expected future exchange value of the content inventory stored by each node}. Intuitively, the value of a piece of content to a node $A$ should depend on \emph{(i)} how many nodes are interested in it, \emph{(ii)} how often does $A$ see these nodes, \emph{(iii)} how much content, interesting to $A$, do these nodes have, \emph{(iv)} how \emph{well-behaved} are these nodes. MobiTrade uses a simply, robust utility function that implicitly captures all these features, without explicitly measuring each one, and that turns each node into a \emph{merchant} fetching the content that has the highest chance to be sold (and exchanged for content of interest) to its good \emph{clients}. Summarizing, the major contributions in this direction are:
\begin{enumerate}
    \item We formulate the optimal content sharing problem in DTNs from the perspective of non-altruistic nodes while relying on a tit-for-tat mechanism to isolate free-riders.
    \item We propose MobiTrade, a utility-based solution to this problem that predicts the (exchange) value of each piece of content and provides a customized resource allocation strategy for each node, \emph{matched} to its own interests and mobility pattern.
\end{enumerate}
To our best knowledge, MobiTrade is the first content sharing system for DTNs that can both deal with rational and selfish nodes while at the same time achieving good global outcomes \emph{without explicit hard constraints on the topology and dependency of nodes or on their social behavior}. 

The performance evaluation of our two main contributions HBSD and MobiTrade is done respectively through extensive NS2 and NS3 simulations supplied by real mobility traces. In Chapter~\ref{chapter:HBSD}, we implement HBSD, a real external router for the DTN2~\cite{DTN2} reference architecture. The proposed router runs on top of the DTN2 forwarding block, collects and analyses the network history towards approximating network level parameters and providing the right content drop or scheduling decisions to apply in case of a device storage congestion or a contact disruption. We also describe in Chapter~\ref{chapter:MobiTrade}, the implementation of our channel based content dissemination architecture, MobiTrade, for smart-phones equipped with the Android operating system. 

\section*{Organization}

The remainder of this thesis is as following. In the next chapter we introduce our problems background and discuss a list of related works. Chapter~\ref{chapter:ptp} describes the 
greedy optimal solution that we propose for point-to-point content routing within a disruption tolerant network. Chapter~\ref{chapter:HBSD} details the implementation issues of our History Based Scheduling and Drop (HBSD) content dissemination schema as an external router for the DTN2 reference architecture.  In Chapter~\ref{chapter:PTMP}, we present MobiTrade, our point-to-multipoint interest driven content sharing architecture for DTN. Then, we provide in Chapter~\ref{chapter:MobiTrade}, a detailed implementation analysis of MobiTrade for smart-phones equipped with the Android platform. In Chapter~\ref{chapter:conclusions}, we conclude the results of our
study and outline the direction for our future work.
